<table class="table table-dark table-bordered align-middle">
  <thead>
    <tr>
      <th>File</th>
      <th>Description</th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    {% for printer in site.printers %}
    <tr>
      <td>{{ printer.title }}</td>

      <td>
        {% if printer.subtitle %}
          {{ printer.subtitle }}
        {% else %}
          —
        {% endif %}
      </td>

      <td>
        <button class="rp-btn printer-btn">
          Open
        </button>

        <!-- ✅ Store printer content SAFELY -->
        <div class="printer-hidden-content" style="display:none;">
          {{ printer.content | markdownify }}
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>



<script>
document.querySelectorAll('.printer-btn').forEach(button => {
  button.addEventListener('click', () => {
    const target = document.getElementById('printer-content');
    const row = button.closest('tr');
    const hidden = row.querySelector('.printer-hidden-content');

    if (!target || !hidden) return;

    // Toggle same content
    if (target.innerHTML === hidden.innerHTML && target.style.display === 'block') {
      target.style.display = 'none';
      button.textContent = 'Open';
      return;
    }

    // Load content into external div
    target.innerHTML = hidden.innerHTML;
    target.style.display = 'block';

    // Reset all buttons
    document.querySelectorAll('.printer-btn').forEach(b => b.textContent = 'Open');
    button.textContent = 'Close';
  });
});
</script>
