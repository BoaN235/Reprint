<table class="table table-dark table-bordered align-middle">
  <tr>
    <th>File Name</th>
    <th>File Size</th>
    <th>Filament</th>
    <th>Guide</th>
  </tr>

    <tr>
    <td>reprint.md</td>
    <td><span class="guide-size">—</span></td>
    <td><span class="guide-filament">—</span></td>
    <td>
      <button class="rp-btn guide-btn">Open</button>

      <div class="guide-hidden-content" style="display:none;">
        {% include guides/remodel.html %}
      </div>
    </td>
  </tr>

  <tr>
    <td>requirements.md</td>
    <td><span class="guide-size">—</span></td>
    <td><span class="guide-filament">—</span></td>
    <td>
      <button class="rp-btn guide-btn">Open</button>

      <!-- Jekyll renders markdown HERE -->
      <div class="guide-hidden-content" style="display:none;">
        {% include guides/requirements.html %}
      </div>
    </td>
  </tr>

  <tr>
    <td>timeline.md</td>
    <td><span class="guide-size">—</span></td>
    <td><span class="guide-filament">—</span></td>
    <td>
      <button class="rp-btn guide-btn">Open</button>

      <div class="guide-hidden-content" style="display:none;">
        {% include guides/timeline.html %}
      </div>
    </td>
  </tr>

  <tr>
    <td>submit.md</td>
    <td>—</td>
    <td>—</td>
    <td>
      <button class="rp-btn" onclick="window.location.href='https://forms.fillout.com/t/66N2admZL9us'">Open</button>
    </td>
  </tr>
</table>


<script>
document.addEventListener('DOMContentLoaded', () => {
  const target = document.getElementById('guide-content');
  if (!target) return;

  // --- FORCE CONSOLE TO TOP POSITION IN DOM ---
  const consoleParent = target.parentElement;
  if (consoleParent) {
    consoleParent.prepend(target);
  }

  function openGuide(button) {
    const row = button.closest('tr');
    const hidden = row?.querySelector('.guide-hidden-content');
    if (!hidden) return;

    // Close if already open
    if (target._openEl === hidden && target.style.display !== 'none') {
      target.style.display = 'none';
      target._openEl = null;
      button.textContent = 'Open';
      return;
    }

    // Open new guide
    target.innerHTML = hidden.innerHTML;
    target.style.display = 'block';
    target._openEl = hidden;

    // Reset buttons
    document.querySelectorAll('.guide-btn').forEach(b => b.textContent = 'Open');
    button.textContent = 'Close';

    // --- FORCE CONSOLE SCROLL TO TOP ---
    target.parentElement.scrollTop = 0;
  }

  // Attach handlers
  document.querySelectorAll('.guide-btn').forEach(button => {
    button.addEventListener('click', () => openGuide(button));
  });

  // --- AUTO-LOAD REPRINT ---
  const reprintRow = [...document.querySelectorAll('tr')]
    .find(tr => tr.textContent.includes('reprint.md'));

  const reprintBtn = reprintRow?.querySelector('.guide-btn');
  if (reprintBtn) {
    openGuide(reprintBtn);
  }
});

// --- Fake size + filament (unchanged) ---
(function(){
  function rnd(min, max){ return Math.random() * (max - min) + min; }
  function formatSize(){
    if(Math.random() < 0.8){
      return Math.round(rnd(20, 600)) + ' KB';
    }
    return (Math.round(rnd(0.4, 6.0)*10)/10) + ' MB';
  }
  function formatFilament(){
    return (Math.round(rnd(10, 350)*10)/10) + ' g';
  }
  document.querySelectorAll('.guide-size').forEach(el => el.textContent = formatSize());
  document.querySelectorAll('.guide-filament').forEach(el => el.textContent = formatFilament());
})();
</script>
